# immobility
Analysis of immobility from polybox videos analyzed with DeepLabCut (DLC).
Protocol for Busquets-Garcia Lab.

## Before starting
- Download the Python scripts from this repository.
- Create a folder in your computer named **Python**.
- Inside **Python** create the following folders:
  - **Freezing periods**. It will contain the generated freezing periods of each video, stored as CSV files.
  - **Figures**. In this folder, you'll store your plots.
  - **Data**. You have to create the following folders:
    - **dat**. Here you have to store the the DAT files generated by the polybox.
    - **dlc**. And here, you need to put the CSV files generated by DLC.
    - **videos**. Finally, here you have to store the AVI videos from the polybox.

To sum up, this is what you need to start:

| Folder | directory | content |
| ------ | ------ | ------ |
| Python | /python/ |  |
| Freezing Periods | /Python/Freezing Periods/ | empty |
| Figures | /Python/Figures/ | empty |
| Data | /Python/Data/ |  |
| dat | /Python/Data/dat/ | DAT files from the polybox |
| dlc | /Python/Data/dlc/ | CSV files from the DLC |
| videos | /Python/Data/videos/ | AVI files from the polybox |

Now it's time to create a **Mice file**. Create an Excel file that will have a row for each video. Create the following columns:
- **mouse**. The IDs for each mouse.
- **protocol**. The protocol name.
- **file**. The name of the CSV files generated by DLC.
- Other columns with the conditions you may want to add.

Here's an example:

| mouse | protocol | file | group |
| ------ | ------ | ------ | ------ |
| 230029403 | habituation | file_230029403 | control |
| 230029404 | habituation | file_230029404 | control |
| 230029405 | habituation | file_230029405 | treatment |

Now save the file as a CSV file, then save the CSV as a TXT file.

## Loading the settings.py

Open the **setting.py** file and modify it to fit your directories. You have to change both the username and the directories of the folders you previously created. Once done, save your file.

## Loading the behavior_analysis.py

Just open the **behavior_analysis.py** script and run it. Some considerations:
- After the analysis, you will obtain a huge data frame with the results of your analysis. To avoid repeating the analysis in the future, a CSV copy of this data frame will be automatically saved in your folder.
- Sometimes, you may obtain an error with some videos, especially with those longer ones. In that case, repeat the analysis omitting those videos.

## Loading the plots_higher_order.py


















